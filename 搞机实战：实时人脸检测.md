<a name="content">目录</a>

[搞机实战：实时人脸检测](#title)
- [安装OpenCV 3包](#install-opencv3)








<h1 name="title">搞机实战：实时人脸检测</h1>

<a name="install-opencv3"><h3>安装OpenCV 3包 [<sup>目录</sup>](#content)</h3></a>

<p align="left"><li><strong>1. Expand filesystem</strong></li></p>

用raspi-config打开树莓派配置菜单，选择第一项，进行文件系统扩展。重启后激活设置。

重启后执行`df -h`，再查看文件系统空间，可以看到`/dev/root`空间大了不少

<p align="left"><li><strong>2. Install dependencies</strong></li></p>

首先，更新升级已安装的软件包，这一步比较耗时，建议在执行这一步的同时，另开窗口，开启OpenCV源码和OpenCV_contrib的下载 请点 [这里](#download-opencv) 进行跳转

```
$ sudo apt-get update
$ sudo apt-get upgrade
```

接着安装一些开发工具，如Cmake

```
$ sudo apt-get install build-essential cmake pkg-config
```

然后，安装图片I/O 包，可以从磁盘中读取各种格式的图片文件。

```
$ sudo apt-get install libjpeg-dev libtiff5-dev libjasper-dev libpng12-dev
```

除了图片I/O包，我们还需要视频I/O包

```
$ sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev
$ sudo apt-get install libxvidcore-dev libx264-dev
```

OpenCV依赖一个叫`highgui`的子模块，它能将图片展示在屏幕上构成基础的GUIs。在编译`highgui`的模块前，我们还需要安装GTK开发库（GTK development library）

```
$ sudo apt-get install libgtk2.0-dev
```

OpenCV的运算多为矩阵运算，安装以下包来优化矩阵运算：

```
$ sudo apt-get install libatlas-base-dev gfortran
```

最后，安装python 2.7 和python 3的头文件以便编译OpenCV

```
$ sudo apt-get install python2.7-dev python3-dev
```

<p name="download-opencv" align="left"><li><strong>3. Download the OpenCV source code</strong></li></p>

下载OpenCV的源码，文件大小为87M，下载速度慢，比较费时，所以为了提高效率，建议在上一步，即安装依赖包的同时，开启OpenCV源码的下载

```
# 不同版本的，只需要将3.1.0修改成最新的版本号即可
$ wget -c -O opencv.zip https://github.com/Itseez/opencv/archive/3.4.1.zip
```

我们需要安装完整的OpenCV 3，所以我们还需要将opencv_contrib代码仓库下载到本地，大小为56M，同样另开窗口同时开启下载

```
$ wget -c -O opencv_contrib.zip https://github.com/Itseez/opencv_contrib/archive/3.4.1.zip
```

